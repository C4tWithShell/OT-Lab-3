<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="mobile-web-app-capable" content="yes">
    <title>
        OT Lab 3 - DevSecOps - HackMD
    </title>
    <link rel="icon" type="image/png" href="https://hackmd.io/favicon.png">
    <link rel="apple-touch-icon" href="https://hackmd.io/apple-touch-icon.png">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css" integrity="sha256-3iu9jgsy9TpTwXKb7bNQzqWekRX7pPK+2OLj3R922fo=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/octicons/3.5.0/octicons.min.css" integrity="sha256-QiWfLIsCT02Sdwkogf6YMiQlj4NE84MKkzEMkZnMGdg=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/themes/prism.min.css" integrity="sha256-vtR0hSWRc3Tb26iuN2oZHt3KRUomwTufNIf5/4oeCyg=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@hackmd/emojify.js@2.1.0/dist/css/basic/emojify.min.css" integrity="sha256-UOrvMOsSDSrW6szVLe8ZDZezBxh5IoIfgTwdNDgTjiU=" crossorigin="anonymous" />
    <style>
        @import url(https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i|Source+Code+Pro:300,400,500|Source+Sans+Pro:300,300i,400,400i,600,600i|Source+Serif+Pro&subset=latin-ext);.hljs{display:block;background:#fff;padding:.5em;color:#333;overflow-x:auto}.hljs-comment,.hljs-meta{color:#969896}.hljs-emphasis,.hljs-quote,.hljs-string,.hljs-strong,.hljs-template-variable,.hljs-variable{color:#df5000}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#a71d5d}.hljs-attribute,.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#0086b3}.hljs-built_in,.hljs-builtin-name{color:#005cc5}.hljs-name,.hljs-section{color:#63a35c}.hljs-tag{color:#333}.hljs-attr,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-title{color:#795da3}.hljs-addition{color:#55a532;background-color:#eaffea}.hljs-deletion{color:#bd2c00;background-color:#ffecec}.hljs-link{text-decoration:underline}.markdown-body{font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body>:first-child{margin-top:0!important}.markdown-body>:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body .absent{color:#c00}.markdown-body .anchor{float:left;padding-right:4px;margin-left:-20px;line-height:1}.markdown-body .anchor:focus{outline:none}.markdown-body blockquote,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e7e7e7;border:0}.markdown-body blockquote{font-size:16px;padding:0 1em;color:#777;border-left:.25em solid #ddd}.markdown-body blockquote>:first-child{margin-top:0}.markdown-body blockquote>:last-child{margin-bottom:0}.markdown-body kbd,.popover kbd{display:inline-block;padding:3px 5px;font-size:11px;line-height:10px;color:#555;vertical-align:middle;background-color:#fcfcfc;border:1px solid #ccc;border-bottom-color:#bbb;border-radius:3px;box-shadow:inset 0 -1px 0 #bbb}.markdown-body .loweralpha{list-style-type:lower-alpha}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#000;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1 code,.markdown-body h1 tt,.markdown-body h2 code,.markdown-body h2 tt,.markdown-body h3 code,.markdown-body h3 tt,.markdown-body h4 code,.markdown-body h4 tt,.markdown-body h5 code,.markdown-body h5 tt,.markdown-body h6 code,.markdown-body h6 tt{font-size:inherit}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eee}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#777}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol.no-list,.markdown-body ul.no-list{padding:0;list-style-type:none}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li>p{margin-top:16px}.markdown-body li+li{padding-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}.markdown-body table th{font-weight:700}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #ddd}.markdown-body table tr{background-color:#fff;border-top:1px solid #ccc}.markdown-body table tr:nth-child(2n){background-color:#f8f8f8}.markdown-body img{max-width:100%;box-sizing:content-box;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body .emoji{max-width:none;vertical-align:text-top;background-color:transparent}.markdown-body span.frame{display:block;overflow:hidden}.markdown-body span.frame>span{display:block;float:left;width:auto;padding:7px;margin:13px 0 0;overflow:hidden;border:1px solid #ddd}.markdown-body span.frame span img{display:block;float:left}.markdown-body span.frame span span{display:block;padding:5px 0 0;clear:both;color:#333}.markdown-body span.align-center{display:block;overflow:hidden;clear:both}.markdown-body span.align-center>span{display:block;margin:13px auto 0;overflow:hidden;text-align:center}.markdown-body span.align-center span img{margin:0 auto;text-align:center}.markdown-body span.align-right{display:block;overflow:hidden;clear:both}.markdown-body span.align-right>span{display:block;margin:13px 0 0;overflow:hidden;text-align:right}.markdown-body span.align-right span img{margin:0;text-align:right}.markdown-body span.float-left{display:block;float:left;margin-right:13px;overflow:hidden}.markdown-body span.float-left span{margin:13px 0 0}.markdown-body span.float-right{display:block;float:right;margin-left:13px;overflow:hidden}.markdown-body span.float-right>span{display:block;margin:13px auto 0;overflow:hidden;text-align:right}.markdown-body code,.markdown-body tt{padding:0;padding-top:.2em;padding-bottom:.2em;margin:0;font-size:85%;background-color:rgba(0,0,0,.04);border-radius:3px}.markdown-body code:after,.markdown-body code:before,.markdown-body tt:after,.markdown-body tt:before{letter-spacing:-.2em;content:"\00a0"}.markdown-body code br,.markdown-body tt br{display:none}.markdown-body del code{text-decoration:inherit}.markdown-body pre{word-wrap:normal}.markdown-body pre>code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f7f7f7;border-radius:3px}.markdown-body pre code,.markdown-body pre tt{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}.markdown-body pre code:after,.markdown-body pre code:before,.markdown-body pre tt:after,.markdown-body pre tt:before{content:normal}.markdown-body .csv-data td,.markdown-body .csv-data th{padding:5px;overflow:hidden;font-size:12px;line-height:1;text-align:left;white-space:nowrap}.markdown-body .csv-data .blob-line-num{padding:10px 8px 9px;text-align:right;background:#fff;border:0}.markdown-body .csv-data tr{border-top:0}.markdown-body .csv-data th{font-weight:700;background:#f8f8f8;border-top:0}.news .alert .markdown-body blockquote{padding:0 0 0 40px;border:0 none}.activity-tab .news .alert .commits,.activity-tab .news .markdown-body blockquote{padding-left:0}.task-list-item{list-style-type:none}.task-list-item label{font-weight:400}.task-list-item.enabled label{cursor:pointer}.task-list-item+.task-list-item{margin-top:3px}.task-list-item-checkbox{float:left;margin:.31em 0 .2em -1.3em!important;vertical-align:middle;cursor:default!important}.markdown-body{padding-top:40px;padding-bottom:40px;max-width:758px;overflow:visible!important;position:relative}.markdown-body .emoji{vertical-align:top}.markdown-body pre{border:inherit!important}.markdown-body code{color:inherit!important}.markdown-body pre code .wrapper{display:-moz-inline-flex;display:-ms-inline-flex;display:-o-inline-flex;display:inline-flex}.markdown-body pre code .gutter{float:left;overflow:hidden;-webkit-user-select:none;user-select:none}.markdown-body pre code .gutter.linenumber{text-align:right;position:relative;display:inline-block;cursor:default;z-index:4;padding:0 8px 0 0;min-width:20px;box-sizing:content-box;color:#afafaf!important;border-right:3px solid #6ce26c!important}.markdown-body pre code .gutter.linenumber>span:before{content:attr(data-linenumber)}.markdown-body pre code .code{float:left;margin:0 0 0 16px}.markdown-body .gist .line-numbers{border-left:none;border-top:none;border-bottom:none}.markdown-body .gist .line-data{border:none}.markdown-body .gist table{border-spacing:0;border-collapse:inherit!important}.markdown-body code[data-gist-id]{background:none;padding:0}.markdown-body code[data-gist-id]:after,.markdown-body code[data-gist-id]:before{content:""}.markdown-body code[data-gist-id] .blob-num{border:unset}.markdown-body code[data-gist-id] table{overflow:unset;margin-bottom:unset}.markdown-body code[data-gist-id] table tr{background:unset}.markdown-body[dir=rtl] pre{direction:ltr}.markdown-body[dir=rtl] code{direction:ltr;unicode-bidi:embed}.markdown-body .alert>p:last-child{margin-bottom:0}.markdown-body pre.abc,.markdown-body pre.flow-chart,.markdown-body pre.graphviz,.markdown-body pre.mermaid,.markdown-body pre.sequence-diagram,.markdown-body pre.vega{text-align:center;background-color:inherit;border-radius:0;white-space:inherit;overflow:visible}.markdown-body pre.abc>code,.markdown-body pre.flow-chart>code,.markdown-body pre.graphviz>code,.markdown-body pre.mermaid>code,.markdown-body pre.sequence-diagram>code,.markdown-body pre.vega>code{text-align:left}.markdown-body pre.abc>svg,.markdown-body pre.flow-chart>svg,.markdown-body pre.graphviz>svg,.markdown-body pre.mermaid>svg,.markdown-body pre.sequence-diagram>svg,.markdown-body pre.vega>svg{max-width:100%;height:100%}.markdown-body pre>code.wrap{white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word}.markdown-body .alert>p:last-child,.markdown-body .alert>ul:last-child{margin-bottom:0}.markdown-body summary{display:list-item}.markdown-body summary:focus{outline:none}.markdown-body details summary{cursor:pointer}.markdown-body details:not([open])>:not(summary){display:none}.markdown-body figure{margin:1em 40px}.markdown-body .mark,.markdown-body mark{background-color:#fff1a7}.vimeo,.youtube{cursor:pointer;display:table;text-align:center;background-position:50%;background-repeat:no-repeat;background-size:contain;background-color:#000;overflow:hidden}.vimeo,.youtube{position:relative;width:100%}.youtube{padding-bottom:56.25%}.vimeo img{width:100%;object-fit:contain;z-index:0}.youtube img{object-fit:cover;z-index:0}.vimeo iframe,.youtube iframe,.youtube img{width:100%;height:100%;position:absolute;top:0;left:0}.vimeo iframe,.youtube iframe{vertical-align:middle;z-index:1}.vimeo .icon,.youtube .icon{position:absolute;height:auto;width:auto;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;opacity:.3;transition:opacity .2s;z-index:0}.vimeo:hover .icon,.youtube:hover .icon{opacity:.6;transition:opacity .2s}.slideshare .inner,.speakerdeck .inner{position:relative;width:100%}.slideshare .inner iframe,.speakerdeck .inner iframe{position:absolute;top:0;bottom:0;left:0;right:0;width:100%;height:100%}.figma{display:table;position:relative;width:100%;padding-bottom:56.25%}.figma iframe{position:absolute;top:0;bottom:0;left:0;right:0;width:100%;height:100%;border:1px solid #eee}.markmap-container{height:300px}.markmap-container>svg{width:100%;height:100%}.MJX_Assistive_MathML{display:none}#MathJax_Message{z-index:1000!important}.ui-infobar{position:relative;z-index:2;max-width:760px;margin:25px auto -25px;color:#777}.toc .invisable-node{list-style-type:none}.ui-toc{position:fixed;bottom:20px;z-index:998}.ui-toc.both-mode{margin-left:8px}.ui-toc.both-mode .ui-toc-label{height:40px;padding:10px 4px;border-top-left-radius:0;border-bottom-left-radius:0}.ui-toc-label{background-color:#e6e6e6;border:none;color:#868686;transition:opacity .2s}.ui-toc .open .ui-toc-label{opacity:1;color:#fff;transition:opacity .2s}.ui-toc-label:focus{opacity:.3;background-color:#ccc;color:#000}.ui-toc-label:hover{opacity:1;background-color:#ccc;transition:opacity .2s}.ui-toc-dropdown{margin-top:20px;margin-bottom:20px;padding-left:10px;padding-right:10px;max-width:45vw;width:25vw;max-height:70vh;overflow:auto;text-align:inherit}.ui-toc-dropdown>.toc{max-height:calc(70vh - 100px);overflow:auto}.ui-toc-dropdown[dir=rtl] .nav{padding-right:0;letter-spacing:.0029em}.ui-toc-dropdown a{overflow:hidden;text-overflow:ellipsis;white-space:pre}.ui-toc-dropdown .nav>li>a{display:block;padding:4px 20px;font-size:13px;font-weight:500;color:#767676}.ui-toc-dropdown .nav>li:first-child:last-child>ul,.ui-toc-dropdown .toc.expand ul{display:block}.ui-toc-dropdown .nav>li>a:focus,.ui-toc-dropdown .nav>li>a:hover{padding-left:19px;color:#000;text-decoration:none;background-color:transparent;border-left:1px solid #000}.ui-toc-dropdown[dir=rtl] .nav>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav>li>a:hover{padding-right:19px;border-left:none;border-right:1px solid #000}.ui-toc-dropdown .nav>.active:focus>a,.ui-toc-dropdown .nav>.active:hover>a,.ui-toc-dropdown .nav>.active>a{padding-left:18px;font-weight:700;color:#000;background-color:transparent;border-left:2px solid #000}.ui-toc-dropdown[dir=rtl] .nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav>.active>a{padding-right:18px;border-left:none;border-right:2px solid #000}.ui-toc-dropdown .nav .nav{display:none;padding-bottom:10px}.ui-toc-dropdown .nav>.active>ul{display:block}.ui-toc-dropdown .nav .nav>li>a{padding-top:1px;padding-bottom:1px;padding-left:30px;font-size:12px;font-weight:400}.ui-toc-dropdown[dir=rtl] .nav .nav>li>a{padding-right:30px}.ui-toc-dropdown .nav .nav>li>ul>li>a{padding-top:1px;padding-bottom:1px;padding-left:40px;font-size:12px;font-weight:400}.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a{padding-right:40px}.ui-toc-dropdown .nav .nav>li>a:focus,.ui-toc-dropdown .nav .nav>li>a:hover{padding-left:29px}.ui-toc-dropdown[dir=rtl] .nav .nav>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav .nav>li>a:hover{padding-right:29px}.ui-toc-dropdown .nav .nav>li>ul>li>a:focus,.ui-toc-dropdown .nav .nav>li>ul>li>a:hover{padding-left:39px}.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a:hover{padding-right:39px}.ui-toc-dropdown .nav .nav>.active:focus>a,.ui-toc-dropdown .nav .nav>.active:hover>a,.ui-toc-dropdown .nav .nav>.active>a{padding-left:28px;font-weight:500}.ui-toc-dropdown[dir=rtl] .nav .nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>a{padding-right:28px}.ui-toc-dropdown .nav .nav>.active>.nav>.active:focus>a,.ui-toc-dropdown .nav .nav>.active>.nav>.active:hover>a,.ui-toc-dropdown .nav .nav>.active>.nav>.active>a{padding-left:38px;font-weight:500}.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active>a{padding-right:38px}.markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif}html[lang^=ja] .markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,Osaka,Meiryo,メイリオ,MS Gothic,ＭＳ\ ゴシック,sans-serif}html[lang=zh-tw] .markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang TC,Microsoft JhengHei,微軟正黑,sans-serif}html[lang=zh-cn] .markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang SC,Microsoft YaHei,微软雅黑,sans-serif}html .markdown-body[lang^=ja]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,Osaka,Meiryo,メイリオ,MS Gothic,ＭＳ\ ゴシック,sans-serif}html .markdown-body[lang=zh-tw]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang TC,Microsoft JhengHei,微軟正黑,sans-serif}html .markdown-body[lang=zh-cn]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang SC,Microsoft YaHei,微软雅黑,sans-serif}html[lang^=ja] .ui-toc-dropdown{font-family:Source Sans Pro,Helvetica,Arial,Meiryo UI,MS PGothic,ＭＳ\ Ｐゴシック,sans-serif}html[lang=zh-tw] .ui-toc-dropdown{font-family:Source Sans Pro,Helvetica,Arial,Microsoft JhengHei UI,微軟正黑UI,sans-serif}html[lang=zh-cn] .ui-toc-dropdown{font-family:Source Sans Pro,Helvetica,Arial,Microsoft YaHei UI,微软雅黑UI,sans-serif}html .ui-toc-dropdown[lang^=ja]{font-family:Source Sans Pro,Helvetica,Arial,Meiryo UI,MS PGothic,ＭＳ\ Ｐゴシック,sans-serif}html .ui-toc-dropdown[lang=zh-tw]{font-family:Source Sans Pro,Helvetica,Arial,Microsoft JhengHei UI,微軟正黑UI,sans-serif}html .ui-toc-dropdown[lang=zh-cn]{font-family:Source Sans Pro,Helvetica,Arial,Microsoft YaHei UI,微软雅黑UI,sans-serif}.ui-affix-toc{position:fixed;top:0;max-width:15vw;max-height:70vh;overflow:auto}.back-to-top,.expand-toggle,.go-to-bottom{display:block;padding:4px 10px;margin-top:10px;margin-left:10px;font-size:12px;font-weight:500;color:#999}.back-to-top:focus,.back-to-top:hover,.expand-toggle:focus,.expand-toggle:hover,.go-to-bottom:focus,.go-to-bottom:hover{color:#563d7c;text-decoration:none}.back-to-top,.go-to-bottom{margin-top:0}.ui-user-icon{width:20px;height:20px;display:block;border-radius:50%;margin-top:2px;margin-bottom:2px;margin-right:5px;background-position:50%;background-repeat:no-repeat;background-size:cover}.ui-user-icon.small{width:18px;height:18px;display:inline-block;vertical-align:middle;margin:0 0 .2em}.ui-infobar>small>span{line-height:22px}.ui-infobar>small .dropdown{display:inline-block}.ui-infobar>small .dropdown a:focus,.ui-infobar>small .dropdown a:hover{text-decoration:none}.ui-more-info{color:#888;cursor:pointer;vertical-align:middle}.ui-more-info .fa{font-size:16px}.ui-connectedGithub,.ui-published-note{color:#888}.ui-connectedGithub{line-height:23px;white-space:nowrap}.ui-connectedGithub a.file-path{color:#888;text-decoration:none;padding-left:22px}.ui-connectedGithub a.file-path:active,.ui-connectedGithub a.file-path:hover{color:#888;text-decoration:underline}.ui-connectedGithub .fa{font-size:20px}.ui-published-note .fa{font-size:20px;vertical-align:top}.unselectable{-webkit-user-select:none;-o-user-select:none;user-select:none}.selectable{-webkit-user-select:text;-o-user-select:text;user-select:text}@media print{blockquote,div,img,pre,table{page-break-inside:avoid!important}a[href]:after{font-size:12px!important}}.markdown-body.slides{position:relative;z-index:1;color:#222}.markdown-body.slides:before{content:"";display:block;position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;background-color:currentColor;box-shadow:0 0 0 50vw}.markdown-body.slides section[data-markdown]{position:relative;margin-bottom:1.5em;background-color:#fff;text-align:center}.markdown-body.slides section[data-markdown] code{text-align:left}.markdown-body.slides section[data-markdown]:before{content:"";display:block;padding-bottom:56.23%}.markdown-body.slides section[data-markdown]>div:first-child{position:absolute;top:50%;left:1em;right:1em;transform:translateY(-50%);max-height:100%;overflow:hidden}.markdown-body.slides section[data-markdown]>ul{display:inline-block}.markdown-body.slides>section>section+section:after{content:"";position:absolute;top:-1.5em;right:1em;height:1.5em;border:3px solid #777}.site-ui-font{font-family:Source Sans Pro,Helvetica,Arial,sans-serif}html[lang^=ja] .site-ui-font{font-family:Source Sans Pro,Helvetica,Arial,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,Osaka,Meiryo,メイリオ,MS Gothic,ＭＳ\ ゴシック,sans-serif}html[lang=zh-tw] .site-ui-font{font-family:Source Sans Pro,Helvetica,Arial,PingFang TC,Microsoft JhengHei,微軟正黑,sans-serif}html[lang=zh-cn] .site-ui-font{font-family:Source Sans Pro,Helvetica,Arial,PingFang SC,Microsoft YaHei,微软雅黑,sans-serif}body{font-smoothing:subpixel-antialiased!important;-webkit-font-smoothing:subpixel-antialiased!important;-moz-osx-font-smoothing:auto!important;text-shadow:0 0 1em transparent,1px 1px 1.2px rgba(0,0,0,.004);-webkit-overflow-scrolling:touch;letter-spacing:.025em;font-family:Source Sans Pro,Helvetica,Arial,sans-serif}html[lang^=ja] body{font-family:Source Sans Pro,Helvetica,Arial,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,Osaka,Meiryo,メイリオ,MS Gothic,ＭＳ\ ゴシック,sans-serif}html[lang=zh-tw] body{font-family:Source Sans Pro,Helvetica,Arial,PingFang TC,Microsoft JhengHei,微軟正黑,sans-serif}html[lang=zh-cn] body{font-family:Source Sans Pro,Helvetica,Arial,PingFang SC,Microsoft YaHei,微软雅黑,sans-serif}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}abbr[data-original-title],abbr[title]{cursor:help}body.modal-open{overflow-y:auto;padding-right:0!important}
    </style>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    	<script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" integrity="sha256-3Jy/GbSLrg0o9y5Z5n1uw0qxZECH7C6OQpVBgNFYa0g=" crossorigin="anonymous"></script>
    	<script src="https://cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js" integrity="sha256-g6iAfvZp+nDQ2TdTR/VVKJf3bGro4ub5fvWSWVRi2NE=" crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.9/es5-shim.min.js" integrity="sha256-8E4Is26QH0bD52WoQpcB+R/tcWQtpzlCojrybUd7Mxo=" crossorigin="anonymous"></script>
    <![endif]-->
</head>

<body>
    <div id="doc" class="markdown-body container-fluid comment-enabled" data-hard-breaks="true"><center>
<h1 id="OT-Lab-3---DevSecOps" data-id="OT-Lab-3---DevSecOps"><a class="anchor hidden-xs" href="#OT-Lab-3---DevSecOps" title="OT-Lab-3---DevSecOps"><span class="octicon octicon-link"></span></a><span>OT Lab 3 - DevSecOps</span></h1>
<p><strong><span>Name: Vladimir Shelkovnikov</span></strong><br>
<span>—</span></p>
</center><h2 id="Task-1---Set-up-your-environment" data-id="Task-1---Set-up-your-environment"><a class="anchor hidden-xs" href="#Task-1---Set-up-your-environment" title="Task-1---Set-up-your-environment"><span class="octicon octicon-link"></span></a><span>Task 1 - Set up your environment</span></h2><div class="alert alert-success">
<ol>
<li><span>Create two VMs, for the Jenkins server and its agent.</span><br>
<span>a. Install Docker Engine on both VMs.</span></li>
<li><span>Isolate your Jenkins server behind a reverse proxy and access it through port 80 (e.g Nginx Reverse Proxy).</span></li>
<li><span>You will be working on the following Maven project. Go through it and familiarize yourself (git clone </span><a href="https://github.com/HamidullahMuslih/ot-lab-sdlc.git" target="_blank" rel="noopener"><span>https://github.com/HamidullahMuslih/ot-lab-sdlc.git</span></a><span> ).</span></li>
</ol>
<blockquote>
<p><span>Note: the project is written in Springboot (Backend) and Bootstrap (Frontend) and already contains unit test cases.</span></p>
</blockquote>
<ol start="4">
<li><span>Read and explain in one line sentence the Maven lifecycle. Understand commands for each phase (e.g build, unit test, integration test, packaging and etc.) since you will need to use them during the pipeline tasks.</span></li>
</ol>
</div><p><span>I have created two VMs in KVM. I started by setting up a server VM:</span></p><pre><code>sudo apt update
// Install curl, Nginx, and java
sudo apt install nginx curl openjdk-11-jre
// Add the repository key
curl -fsSL https://pkg.jenkins.io/debian-stable/jenkins.io.key | sudo tee /usr/share/keyrings/jenkins-keyring.asc &gt; /dev/null
// append the Debian package repository address to the server’s sources.list
echo deb [signed-by=/usr/share/keyrings/jenkins-keyring.asc]   https://pkg.jenkins.io/debian-stable binary/ | sudo tee /etc/apt/sources.list.d/jenkins.list &gt; /dev/null
// Update, install jenkins
sudo apt update
sudo apt install jenkins
// Enable start on boot and start the service
sudo systemctl enable jenkins
sudo systemctl start jenkins
</code></pre><p><span>So now I can access Jenkins as shown in Figure 1.</span></p><center>
<p><img src="https://i.imgur.com/Al3Atxm.png" alt="" loading="lazy"><br>
<span>Figure 1 - Jenkins</span></p>
</center><p><span>I installed docker using the following commands:</span></p><pre><code>// Install necessary packects
sudo apt install apt-transport-https ca-certificates curl software-properties-common
// Add GPG key for official repository
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
// Add Docker as a apt source
sudo add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu focal stable"
sudo apt update
// Install docker
sudo apt install docker-ce
</code></pre><p><span>The Jenkins server will be called </span><strong><span>ot3.jenkins</span></strong><span>. I added it to the hosts file as </span><strong><span>10.1.1.81    ot3.jenkins</span></strong><span>.</span></p><p><span>The next step is to configure Nginx as a reverse proxy as shown in Figure 2.</span></p><center>
<p><img src="https://i.imgur.com/FCvaQNM.png" alt="" loading="lazy"><br>
<span>Figure 2 - Nginx configuration</span></p>
</center><p><span>Then I changed the Jenkins configuration to listen only to localhost: </span><strong><code>JENKINS_ARGS="--webroot=/var/cache/$NAME/war --httpPort=$HTTP_PORT --httpListenAddress=127.0.0.1"</code></strong><span>.</span></p><p><span>I restarted both services. But it turns out that Jenkins no longer uses this configuration. Thus, I created a systemd drop-in directory for Jenkins with the following configuration:</span></p><pre><code>[Service]
Environment="JENKINS_LISTEN_ADDRESS=127.0.0.1"
</code></pre><p><span>After that, I restarted the services using the commands </span><strong><span>sudo systemctl daemon-reload</span></strong><span> and </span><strong><span>sudo systemctl restart jenkins</span></strong><span>. Finally, I can’t access Jenkins as shown in Figure 3.</span></p><center>
<p><img src="https://i.imgur.com/hGYloAK.png" alt="" loading="lazy"><br>
<span>Figure 3 - Access to Jenkins via 10.1.1.81:8080</span></p>
</center><p><span>But I can access it via 10.1.1.81:80 or ot3.jenkins (Figure 4).</span></p><center>
<p><img src="https://i.imgur.com/shb9Ejv.png" alt="" loading="lazy"><br>
<span>Figure 4 - Access to Jenkins via DNS</span></p>
</center><p><span>I installed docker on the second VM. To use him as a Jenkins agent, I created a new user using the command </span><strong><span>sudo useradd -m -d /var/lib/jenkins/ jenkins</span></strong><span>. Also, I installed </span><strong><span>sudo apt install openssh-server</span></strong><span>.</span></p><p><span>I generated an ssh key for the server - </span><code>ssh-keygen -b 2048 -t rsa</code><span>. The private key that I added as credentials for Jenkins. After that I added a new node (Figure 5):</span></p><pre><code>Permanent agent called OT3-VM2
Remote root directory: /var/lib/jenkins
Launch method: Launch slave agent via SSH,
Host: 10.1.1.75
Authentication: using Jenkins credential.
</code></pre><center>
<p><img src="https://i.imgur.com/NwfeOFw.png" alt="" loading="lazy"><br>
<span>Figure 5 - Agent node is added</span></p>
</center><p><span>Maven is a tool for building and managing any Java-based project. The default Maven lifecycle consists of 8 phases:</span></p><ol>
<li><span>Validate - check if the project structure is correct.</span></li>
<li><span>Compile - compiles the source code.</span></li>
<li><span>Test - runs unit tests.</span></li>
<li><span>Package - packages the compiled code in a distributable format like JAR or WAR.</span></li>
<li><span>Integration test - runs the integration tests.</span></li>
<li><span>Verify - verify that the project is valid and meets the quality standards.</span></li>
<li><span>Install - installs the packaged code to the local Maven repository.</span></li>
<li><span>Deploy - copies the packaged code to the remote repository for sharing it with other developers.</span></li>
</ol><h2 id="Task-2---Implement-DevSecOps-Pipeline" data-id="Task-2---Implement-DevSecOps-Pipeline"><a class="anchor hidden-xs" href="#Task-2---Implement-DevSecOps-Pipeline" title="Task-2---Implement-DevSecOps-Pipeline"><span class="octicon octicon-link"></span></a><span>Task 2 - Implement DevSecOps Pipeline</span></h2><div class="alert alert-success">
<p><span>Create the below Jobs in the same sequence:</span></p>
<ol>
<li><span>Create the first job to fetch and build the Maven project. Note: skip the testing in this job.</span></li>
</ol>
</div><p><span>I installed the maven plugin for Jenkins. I have created a new job with the maven project type. I configured the parameters for the GitHub project here and set the build target to </span><strong><span>clean install -DskipTests=true</span></strong><span> to skip the test part. Figure 6 shows that it was successfully built.</span></p><center>
<p><img src="https://i.imgur.com/cWxtBw2.png" alt="" loading="lazy"><br>
<span>Figure 6 - Success</span></p>
</center><p><span>But then I faced an error with maven. Therefore, I set </span><strong><span>Delete workspace before build starts</span></strong><span> to avoid conflicts with the build, set a restriction to run only on the agent and installed maven for the agent. After that, it works fine.</span></p><div class="alert alert-success">
<ol start="2">
<li><span>Create the next job to perform the unit tests of the project.</span></li>
</ol>
</div><p><span>Next, I set a copy of the first job but with a changed goal - </span><strong><span>test</span></strong><span>. It will be built after the successful completion of the first job. The result is shown in Figure 7.</span></p><center>
<p><img src="https://i.imgur.com/ysH7W66.png" alt="" loading="lazy"><br>
<span>Figure 7 - mvn test</span></p>
</center><div class="alert alert-success">
<ol start="3">
<li><span>Create the next job to perform the integration test on the project.</span></li>
</ol>
</div><p><span>For the integration test, I set the goal </span><strong><span>verify -DskipUnitTests</span></strong><span>. It will be built if the second task is successfully built. Figure 8 shows a successful build.</span></p><center>
<p><img src="https://i.imgur.com/qnie0fq.png" alt="" loading="lazy"><br>
<span>Figure 8 - Success</span></p>
</center><p><span>There is also an integration-test command that performs both tests.</span></p><div class="alert alert-success">
<ol start="4">
<li><span>Create the next job to perform static code analysis on the project (e.g with the CheckStyle, PMD, FindBugs tools).</span></li>
</ol>
<blockquote>
<p><span>Note: Read about Warnings Next Generation Plugin.</span><br>
<span>a. Show the reports and share your understanding.</span></p>
</blockquote>
</div><p><span>Then I install </span><strong><span>Warnings Next Generation</span></strong><span> and </span><strong><span>Violations</span></strong><span> plugins. I created new job to perform static analysis.</span><br>
<span>Goals - </span><strong><span>pmd:pmd checkstyle:checkstyle findbugs:findbugs</span></strong></p><ul>
<li><span>Post-build action - Record compiler warnings and static analysis results for PWD, CheckStyle and FindBugs.</span><br>
<span>Figure 9 shows the result.</span></li>
</ul><center>
<p><img src="https://i.imgur.com/J1V5f7L.png" alt="" loading="lazy"><br>
<span>Figure 9 - Static Code Analysis</span></p>
</center><p><span>Now let’s see what they have inside. PMD contains 11 errors with a normal level (Figure 10).</span></p><center>
<p><img src="https://i.imgur.com/rEVxyct.png" alt="" loading="lazy"><br>
<span>Figure 10 - PMD report</span></p>
</center><p><span>All these errors are related to unnecessary imports (Figure 11).</span></p><center>
<p><img src="https://i.imgur.com/SFvTq4O.png" alt="" loading="lazy"><br>
<span>Figure 11 - Unnecessary imports</span></p>
</center><p><span>An unused import still creates a dependency. Because of this, we can waste time updating the module version, investigating vulnerability reports related to that module, etc. Sometimes this can create vulnerabilities that can be exploited. For example, a deserialization device in an unused library may have a vulnerability for remote code execution + it makes code less readable.</span></p><p><span>Now let’s move on to the CheckStyle report (Figure 12).</span></p><center>
<p><img src="https://i.imgur.com/krOxAA1.png" alt="" loading="lazy"><br>
<span>Figure 12 - CheckStyle report</span></p>
</center><p><span>This report contains 706 errors. Most errors are related to variables and code quality. Which makes sense, because many security issues are related to them.</span></p><p><span>Findbugs contains 10 low-level errors, as shown in Figure 13.</span></p><center>
<p><img src="https://i.imgur.com/0r1qbJW.png" alt="" loading="lazy"><br>
<span>Figure 13 - FindBugs report</span></p>
</center><div class="alert alert-success">
<p><span>4b. Feed the static code analysis reports to the Violations Plugin and set the quality gates for the number of bugs in one of the reports, validate your work to fail/unstable the job. Note: after validation remove the quality gate restriction since it will fail the last task of the lab.</span></p>
</div><p><span>Then I installed the violation module with the default configuration, but it doesn’t work because of security-144. I have not been able to solve this problem. But Warnings Next Generation Plugin itself has a quality gates.</span></p><p><span>I set the unstable status to 100 error with any severity and failed to 1000. As a result, the build was marked as unstable (Figure 14).</span></p><center>
<p><img src="https://i.imgur.com/GoP2Jjg.png" alt="" loading="lazy"><br>
<span>Figure 14 - Unstable</span></p>
</center><p><span>It will affect the next job. So next one will be </span><strong><span>Trigger even if the build is unstable</span></strong><span>.</span></p><div class="alert alert-success">
<ol start="5">
<li><span>Create the next job to dockerize your artifact from target/****.war and push it to the docker hub.</span></li>
</ol>
</div><p><span>To create and publish a docker image, I used the following commands as a build step:</span></p><pre><code>cp /var/lib/jenkins/workspace/'Build maven'/target/vprofile-v2.war .
touch Dockerfile
cat &lt;&lt; EOT &gt;&gt;  Dockerfile
FROM tomcat:8-jre11
RUN rm -rf /usr/local/tomcat/webapps/*
COPY vprofile-v2.war /usr/local/tomcat/webapps/ROOT.war
EXPOSE 8080
CMD ["catalina.sh", "run"]
WORKDIR /usr/local/tomcat/
VOLUME /usr/local/tomcat/webapps
EOT
docker build -t rahmat666/ot3-lab .
docker login -u rahmat666 -p --password-stdin
docker push rahmat666/ot3-lab
</code></pre><p><span>It will copy the artifact from the build stage and create a Dockerfile. Then it will build it, log into Docker Hub and publish the image to the repository.</span></p><p><span>Figure 15 shows the result of this job.</span></p><center>
<p><img src="https://i.imgur.com/znZQmsC.png" alt="" loading="lazy"><br>
<span>Figure 15 - Success</span></p>
</center><div class="alert alert-success">
<ol start="6">
<li><span>Create the next job to deploy the docker image from the docker hub to the Jenkins agent and validate/show that you can access the web app.</span></li>
</ol>
</div><p><span>The last task is to deploy the application. To do this, I used the command: </span><code>docker run -d rahmat666/ot3-lab:latest -p 8080:8080</code><span>. After it successed (Figure 16), I can access the web page (Figure 17).</span></p><center>
<p><img src="https://i.imgur.com/GcnUA6F.png" alt="" loading="lazy"><br>
<span>Figure 16 - The Docker container is running on the agent</span></p>
<p><img src="https://i.imgur.com/fPLrrzn.png" alt="" loading="lazy"><br>
<span>Figure 17 - Web page</span></p>
</center><div class="alert alert-success">
<ol start="7">
<li><span>Finally, chain all the jobs such that when you run the 1st job it should execute the rest.</span></li>
</ol>
<blockquote>
<p><span>Note: Use Post-Build Actions&gt;Build other projects.</span></p>
</blockquote>
</div><p><span>We can use </span><strong><span>Post-Build Actions&gt;Build other projects</span></strong><span> to chain the projects or </span><strong><span>Build Triggers&gt;Build after other projects are built</span></strong><span>. I used the second one. The result is shown in Figure 17. Figure 18 shows all the jobs.</span></p><center>
<p><img src="https://i.imgur.com/6j1Pbb8.png" alt="" loading="lazy"><br>
<span>Figure 18 - All the jobs</span></p>
</center><h2 id="Task-3-Optional---I-need-more" data-id="Task-3-Optional---I-need-more"><a class="anchor hidden-xs" href="#Task-3-Optional---I-need-more" title="Task-3-Optional---I-need-more"><span class="octicon octicon-link"></span></a><span>Task 3 (Optional) - I need more</span></h2><div class="alert alert-success">
<p><span>Integrate Slack notification such that for each job the developer gets notified whether the job is a succus, failed, unstable. (Easy)</span></p>
</div><p><span>I have installed the </span><strong><span>Slack Notification</span></strong><span> plugin. In slack I created a new channel and added Jenkins CI Integration to it. Then I configured Slack Notification in Jenkins as shown in Figure 19.</span></p><center>
<p><img src="https://i.imgur.com/bX2MzI5.png" alt="" loading="lazy"><br>
<span>Figure 19 - Slack configuration for Jenkins</span></p>
</center><p><span>Then, for each job, I added a Post-Build action to send notifications as shown in Figure 20.</span></p><center>
<p><img src="https://i.imgur.com/GkHeWa9.png" alt="" loading="lazy"><br>
<span>Figure 20 - Post-Build action</span></p>
</center><p><span>Figure 21 show the notifications.</span></p><center>
<p><img src="https://i.imgur.com/6jskD68.png" alt="" loading="lazy"><br>
<span>Figure 21 - Slack Notifications</span></p>
</center><div class="alert alert-success">
<p><span>Integrate Snyk with Jinkens and find project vulnerabilities.</span></p>
</div><p><span>I installed </span><strong><span>Snyk Security</span></strong><span> plugin. Then I configured it in Global Tool Configuration as shown in Figure 22.</span></p><center>
<p><img src="https://i.imgur.com/6ghDLuT.png" alt="" loading="lazy"><br>
<span>Figure 22 - Snyk configuration</span></p>
</center><p><span>I added the Snyk API Token to Jenkins’ credentials. After that, I added a new step (Invoke Snyk security task) to the Static Code Analysis job. As a result I received a report (Figure 23) [10].</span></p><center>
<p><img src="https://i.imgur.com/pBvSaKT.png" alt="" loading="lazy"><br>
<span>Figure 23 - Snyk Report</span></p>
</center><p><span>It contains 10 critical vulnerabilities - Remote Code Execution, Arbitrary Code Execution, MitM and XXE Injection. All of them are fixable.</span></p><p><span>87 high-level vulnerabilities, there are no fixes for 5 of them - XXE Injection and DoS. It also contains deserialization of untrusted data, directory traversal, http smugging, and others.</span></p><div class="alert alert-success">
<p><span>Integrate Burbsuit in your pipeline and perform vulnerability scanning against the web application.</span></p>
</div><p><span>I downloaded the Jenkins Enterprise Edition plugin and uploaded it to Jenkins as shown in Figure 24.</span></p><center>
<p><img src="https://i.imgur.com/2AV1qEK.png" alt="" loading="lazy"><br>
<span>Figure 24 - Uploading the burpsuite plugin</span></p>
</center><p><span>I installed Burp Suite Enterprise Edition on my workstation. Then I configured the build step for jenkins as shown in Figure 25.</span></p><center>
<p><img src="https://i.imgur.com/ILD4kgi.png" alt="" loading="lazy"><br>
<span>Figure 25 - Build step</span></p>
</center><p><span>Figure 26 shows the result of a burp scan.</span></p><center>
<p><img src="https://i.imgur.com/R35Tnhq.png" alt="" loading="lazy"><br>
<span>Figure 26 - Result from Burp</span></p>
</center><p><span>There are only 15 of them, but they are marked as a high risk due to sending the password in clear text, which leads to a build failure.</span></p><hr><div class="alert alert-success">
<ol start="7">
<li><span>Deploy K8s cluster and make master node as Jenkins agent.</span><br>
<span>a. Write manifest files for the docker image.</span><br>
<span>b. Create a job (or replacement of number eighth job) to deploy the app on K8s cluster.</span></li>
</ol>
</div><p><span>I install dependencies for nodes using the command </span><code>sudo apt-get install curl apt-transport-https git iptables-persistent</code><span>.</span><br>
<span>I configured nessasary kernel module by adding new files </span><code>/etc/modules-load.d/k8s.conf</code><span> with lines:</span></p><pre><code>br_netfilter
overlay
</code></pre><p><span>I stated them using command </span><code>sudo modprobe br_netfilter overlay</code><span>. Also, I created configuration file </span><code>/etc/sysctl.d/k8s.conf</code><span> with content:</span></p><pre><code>net.bridge.bridge-nf-call-ip6tables = 1
net.bridge.bridge-nf-call-iptables = 1
</code></pre><p><span>I applyed it with the command </span><code>sudo sysctl --system</code></p><p><span>Installation of kubernetes:</span></p><pre><code>// Download the Google Cloud public signing key:
sudo curl -fsSLo /usr/share/keyrings/kubernetes-archive-keyring.gpg https://packages.cloud.google.com/apt/doc/apt-key.gpg
// Add the Kubernetes apt repository
echo "deb [signed-by=/usr/share/keyrings/kubernetes-archive-keyring.gpg] https://apt.kubernetes.io/ kubernetes-xenial main" | sudo tee /etc/apt/sources.list.d/kubernetes.list
// Update apt package index with the new repository and install kubectl:
sudo apt-get update
sudo apt-get install -y kubelet kubeadm kubectl
//Turn off updates
sudo apt-mark hold kubelet kubeadm kubectl
</code></pre><p><span>On master node i initialize cluster with the command </span><code>sudo kubeadm init --pod-network-cidr=10.12.0.0/16</code><span> (Figure 27)</span></p><center>
<p><img src="https://i.imgur.com/DCuwWjm.png" alt="" loading="lazy"><br>
<span>Figure 27 - Initialize cluster</span></p>
</center><p><span>then i run the command </span><code>export KUBECONFIG=/etc/kubernetes/admin.conf</code><span>.</span></p><p><span>I install flannel using the command: </span><code>sudo kubectl apply -f https://raw.githubusercontent.com/flannel-io/flannel/master/Documentation/kube-flannel.yml</code></p><p><span>I joined agent to the master using command </span><code>kubeadm join 10.1.1.81:6443 --token 31anle.yhn7oakk8mpdil4u --discovery-token-ca-cert-hash sha256:cf314387005c2cdcc18760ef9163a06647f5d02bf88ea516af6f979b49a2a1fe</code></p><p><span>Then I should see all nodes with command </span><code>sudo kubectl get nodes</code><span> (Figure 28).</span></p><center>
<p><img src="https://i.imgur.com/qG5QRJo.png" alt="" loading="lazy"><br>
<span>Figure 28 - Nodes</span></p>
</center><p><span>I created the following manifest to deploy the app:</span></p><pre data-original-title="" title=""><code>apiVersion: apps/v1
kind: Deployment
metadata:
  name: job6-deploy
  labels:
    app: job
spec:
  replicas: 3
  selector:
    matchLabels:
      app: job
  template:
    metadata:
      labels:
        app: job
    spec:
      containers:
      - name: job
        image: rahmat666/ot3-lab
        ports:
        - name: job-port
          containerPort: 8080

---
apiVersion: v1
kind: Service
metadata:
  name: job-service
spec:
  ports:
  - port: 80
    targetPort: job-port
    protocol: TCP
  selector:
    app: job
  type: LoadBalancer

---
apiVersion: autoscaling/v1
kind: HorizontalPodAutoscaler
metadata:
  name: hpa-vprofile-autoscaler
spec:
  scaleTargetRef:
    apiVersion: extensions/v1beta1
    kind: Deployment
    name: job
  minReplicas: 1
  maxReplicas: 10
  targetCPUUtilizationPercentage: 50
</code></pre><h2 id="References" data-id="References"><a class="anchor hidden-xs" href="#References" title="References"><span class="octicon octicon-link"></span></a><span>References</span></h2><ol>
<li><a href="https://www.jenkins.io/doc/book/installing/linux/#debianubuntu" target="_blank" rel="noopener"><span>Installing Jenkins</span></a></li>
<li><a href="https://www.jenkins.io/doc/book/system-administration/reverse-proxy-configuration-nginx/" target="_blank" rel="noopener"><span>Reverse proxy - Nginx</span></a></li>
<li><a href="https://stackoverflow.com/questions/71489926/jenkins-server-httplistenaddress-127-0-0-1-not-working" target="_blank" rel="noopener"><span>Jenkins server --httpListenAddress=127.0.0.1 not working</span></a></li>
<li><a href="https://medium.com/@_oleksii_/how-to-deploy-jenkins-agent-and-connect-it-to-jenkins-master-in-microsoft-azure-ffeb085957c0" target="_blank" rel="noopener"><span>How to Deploy Jenkins Agent</span></a></li>
<li><a href="https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html" target="_blank" rel="noopener"><span>Apache Maven</span></a></li>
<li><a href="https://www.geeksforgeeks.org/maven-lifecycle-and-basic-maven-commands/" target="_blank" rel="noopener"><span>Maven Lifecycle and Basic Maven Commands</span></a></li>
<li><a href="https://www.testwithspring.com/lesson/running-integration-tests-with-maven/" target="_blank" rel="noopener"><span>Running Integration Tests With Maven</span></a></li>
<li><a href="https://www.youtube.com/watch?v=TWwvxn2-J7E" target="_blank" rel="noopener"><span>Integrate with Slack</span></a></li>
<li><a href="https://plugins.jenkins.io/snyk-security-scanner/" target="_blank" rel="noopener"><span>Snyk Security Usage</span></a></li>
<li><a href="https://app.snyk.io/org/mrrahmat/project/5f98b762-a0d1-43e1-b872-a8cdf7dbb9c2/history/06c3610a-6dc9-4846-b524-4cffdb7393d0" target="_blank" rel="noopener"><span>Snyk Report</span></a></li>
</ol></div>
    <div class="ui-toc dropup unselectable hidden-print" style="display:none;">
        <div class="pull-right dropdown">
            <a id="tocLabel" class="ui-toc-label btn btn-default" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false" title="Table of content">
                <i class="fa fa-bars"></i>
            </a>
            <ul id="ui-toc" class="ui-toc-dropdown dropdown-menu" aria-labelledby="tocLabel">
                <div class="toc"><ul class="nav">
<li class="invisable-node"><ul class="nav">
<li><a href="#Task-1---Set-up-your-environment" title="Task 1 - Set up your environment">Task 1 - Set up your environment</a></li>
<li><a href="#Task-2---Implement-DevSecOps-Pipeline" title="Task 2 - Implement DevSecOps Pipeline">Task 2 - Implement DevSecOps Pipeline</a></li>
<li><a href="#Task-3-Optional---I-need-more" title="Task 3 (Optional) - I need more">Task 3 (Optional) - I need more</a></li>
<li><a href="#References" title="References">References</a></li>
</ul>
</li>
</ul>
</div><div class="toc-menu"><a class="expand-toggle" href="#">Expand all</a><a class="back-to-top" href="#">Back to top</a><a class="go-to-bottom" href="#">Go to bottom</a></div>
            </ul>
        </div>
    </div>
    <div id="ui-toc-affix" class="ui-affix-toc ui-toc-dropdown unselectable hidden-print" data-spy="affix" style="top:17px;display:none;" null null>
        <div class="toc"><ul class="nav">
<li class="invisable-node"><ul class="nav">
<li><a href="#Task-1---Set-up-your-environment" title="Task 1 - Set up your environment">Task 1 - Set up your environment</a></li>
<li><a href="#Task-2---Implement-DevSecOps-Pipeline" title="Task 2 - Implement DevSecOps Pipeline">Task 2 - Implement DevSecOps Pipeline</a></li>
<li><a href="#Task-3-Optional---I-need-more" title="Task 3 (Optional) - I need more">Task 3 (Optional) - I need more</a></li>
<li><a href="#References" title="References">References</a></li>
</ul>
</li>
</ul>
</div><div class="toc-menu"><a class="expand-toggle" href="#">Expand all</a><a class="back-to-top" href="#">Back to top</a><a class="go-to-bottom" href="#">Go to bottom</a></div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gist-embed/2.6.0/gist-embed.min.js" integrity="sha256-KyF2D6xPIJUW5sUDSs93vWyZm+1RzIpKCexxElmxl8g=" crossorigin="anonymous" defer></script>
    <script>
        var markdown = $(".markdown-body");
        //smooth all hash trigger scrolling
        function smoothHashScroll() {
            var hashElements = $("a[href^='#']").toArray();
            for (var i = 0; i < hashElements.length; i++) {
                var element = hashElements[i];
                var $element = $(element);
                var hash = element.hash;
                if (hash) {
                    $element.on('click', function (e) {
                        // store hash
                        var hash = this.hash;
                        if ($(hash).length <= 0) return;
                        // prevent default anchor click behavior
                        e.preventDefault();
                        // animate
                        $('body, html').stop(true, true).animate({
                            scrollTop: $(hash).offset().top
                        }, 100, "linear", function () {
                            // when done, add hash to url
                            // (default click behaviour)
                            window.location.hash = hash;
                        });
                    });
                }
            }
        }

        smoothHashScroll();
        var toc = $('.ui-toc');
        var tocAffix = $('.ui-affix-toc');
        var tocDropdown = $('.ui-toc-dropdown');
        //toc
        tocDropdown.click(function (e) {
            e.stopPropagation();
        });

        var enoughForAffixToc = true;

        function generateScrollspy() {
            $(document.body).scrollspy({
                target: ''
            });
            $(document.body).scrollspy('refresh');
            if (enoughForAffixToc) {
                toc.hide();
                tocAffix.show();
            } else {
                tocAffix.hide();
                toc.show();
            }
            $(document.body).scroll();
        }

        function windowResize() {
            //toc right
            var paddingRight = parseFloat(markdown.css('padding-right'));
            var right = ($(window).width() - (markdown.offset().left + markdown.outerWidth() - paddingRight));
            toc.css('right', right + 'px');
            //affix toc left
            var newbool;
            var rightMargin = (markdown.parent().outerWidth() - markdown.outerWidth()) / 2;
            //for ipad or wider device
            if (rightMargin >= 133) {
                newbool = true;
                var affixLeftMargin = (tocAffix.outerWidth() - tocAffix.width()) / 2;
                var left = markdown.offset().left + markdown.outerWidth() - affixLeftMargin;
                tocAffix.css('left', left + 'px');
            } else {
                newbool = false;
            }
            if (newbool != enoughForAffixToc) {
                enoughForAffixToc = newbool;
                generateScrollspy();
            }
        }
        $(window).resize(function () {
            windowResize();
        });
        $(document).ready(function () {
            windowResize();
            generateScrollspy();
        });

        //remove hash
        function removeHash() {
            window.location.hash = '';
        }

        var backtotop = $('.back-to-top');
        var gotobottom = $('.go-to-bottom');

        backtotop.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            if (scrollToTop)
                scrollToTop();
            removeHash();
        });
        gotobottom.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            if (scrollToBottom)
                scrollToBottom();
            removeHash();
        });

        var toggle = $('.expand-toggle');
        var tocExpand = false;

        checkExpandToggle();
        toggle.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            tocExpand = !tocExpand;
            checkExpandToggle();
        })

        function checkExpandToggle () {
            var toc = $('.ui-toc-dropdown .toc');
            var toggle = $('.expand-toggle');
            if (!tocExpand) {
                toc.removeClass('expand');
                toggle.text('Expand all');
            } else {
                toc.addClass('expand');
                toggle.text('Collapse all');
            }
        }

        function scrollToTop() {
            $('body, html').stop(true, true).animate({
                scrollTop: 0
            }, 100, "linear");
        }

        function scrollToBottom() {
            $('body, html').stop(true, true).animate({
                scrollTop: $(document.body)[0].scrollHeight
            }, 100, "linear");
        }
    </script>
</body>

</html>
